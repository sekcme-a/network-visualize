(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{39743:function(e,t,n){Promise.resolve().then(n.bind(n,2828))},2828:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var o=n(57437),a=n(2265);n(57818);var i=n(220),r=n(48888),s=n(16463);n(87138);var l=()=>{(0,s.useRouter)();let[e,t]=(0,a.useState)([]),[n,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),{nodes:g,setNodes:u,edges:m,setEdges:x}=(0,a.useContext)(r.I),h=(e,t)=>{let n=e.target.files[0],o=new FileReader;o.onload=e=>{let n=e.target.result,o=(0,i.X)(n);"interactions"===t?l(o):d(o)},o.readAsText(n)},p=e=>{let t={};return e.forEach(e=>{let{source:n,target:o}=e.data;t[n]=(t[n]||0)+1,t[o]=(t[o]||0)+1}),t};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[(0,o.jsx)("h3",{style:{marginRight:"20px"},children:"Input Interactions"}),(0,o.jsx)("input",{type:"file",onChange:e=>h(e,"interactions"),accept:".tsv"})]}),(0,o.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[(0,o.jsxs)("h3",{style:{marginRight:"20px"},children:["Protein Annotations",(0,o.jsx)("p",{style:{fontSize:"13px"},children:"(Not required)"})]}),(0,o.jsx)("input",{type:"file",onChange:e=>h(e,"annotations"),accept:".tsv"})]}),(0,o.jsx)("div",{style:{marginTop:"20px"},children:(0,o.jsx)("button",{onClick:()=>{let e=[...new Map(n.map(e=>({data:{id:e["#node1"],label:e["#node1"]}})).map(e=>[e.data.id,e])).values()].map(e=>{let t=c.find(t=>t["#node"]===e.data.id);return t?{data:{...e.data,...t}}:e}),t=new Set,o=n.flatMap(e=>{let n="".concat(e["#node1"],"_").concat(e.node2),o="".concat(e.node2,"_").concat(e["#node1"]);return t.has(n)||t.has(o)?[]:(t.add(n),t.add(o),[{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_combined"),source:e["#node1"],target:e.node2,score:e.combined_score,type:"combined_score"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_neighborhood"),source:e["#node1"],target:e.node2,score:e.neighborhood_on_chromosome,type:"neighborhood_on_chromosome"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_gene_fusion"),source:e["#node1"],target:e.node2,score:e.gene_fusion,type:"gene_fusion"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_phylogenetic_cooccurrence"),source:e["#node1"],target:e.node2,score:e.phylogenetic_cooccurrence,type:"phylogenetic_cooccurrence"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_homology"),source:e["#node1"],target:e.node2,score:e.homology,type:"homology"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_coexpression"),source:e["#node1"],target:e.node2,score:e.coexpression,type:"coexpression"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_experimentally_determined_interaction"),source:e["#node1"],target:e.node2,score:e.experimentally_determined_interaction,type:"experimentally_determined_interaction"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_database_annotated"),source:e["#node1"],target:e.node2,score:e.database_annotated,type:"database_annotated"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_automated_textmining"),source:e["#node1"],target:e.node2,score:e.automated_textmining,type:"automated_textmining"}}].filter(e=>0!==e.data.score&&"0"!==e.data.score))});x(o);let a=p(o),i=e.map(e=>({...e,data:{...e.data,size:a[e.data.id]?a[e.data.id]/1.5+25:25}}));u(i),console.log(o),console.log(i)},children:"Visualize"})})]})};let c=[{selector:"node",css:{label:"data(label)","border-opacity":1,"background-opacity":1,"text-opacity":1,width:45,"text-valign":"center","text-halign":"center",color:"black","font-family":"SansSerif.plain","font-weight":"normal","background-color":"rgb(230, 230, 230)","border-color":"rgb(149, 149, 149)",shape:"ellipse",height:45,"font-size":10,"border-width":.5,label:"data(label)",width:"data(size)",height:"data(size)"}},{selector:"node:selected",css:{"border-width":"6px","border-color":"#000000","border-opacity":"0.5","background-color":"#c9c9c9","text-outline-color":"#77828C"}},{selector:"edge",css:{"text-opacity":1,"target-arrow-shape":"none","target-arrow-color":"rgb(0,0,0)",content:"",width:1,"font-family":"Dialog.plain","font-weight":"normal","line-color":"rgb(31,41,61)","font-size":10,opacity:1,"curve-style":"bazier","haystack-radius":".3","overlay-padding":"2px",cursor:"pointer"}},{selector:'edge[type="combined_score"]',css:{lineColor:"rgb(128,0,128)"}},{selector:'edge[type="neighborhood_on_chromosome"]',css:{lineColor:"rgb(200,0,200)"}},{selector:'edge[type="gene_fusion"]',css:{lineColor:"rgb(0,160,200)"}},{selector:'edge[type="phylogenetic_cooccurrence"]',css:{lineColor:"rgb(170,200,0)"}},{selector:'edge[type="homology"]',css:{lineColor:"rgb(255,165,0)"}},{selector:'edge[type="coexpression"]',css:{lineColor:"rgb(0,128,0)"}},{selector:'edge[type="experimentally_determined_interaction"]',css:{lineColor:"rgb(255,69,0)"}},{selector:'edge[type="database_annotated"]',css:{lineColor:"rgb(0,0,255)"}},{selector:'edge[type="automated_textmining"]',css:{lineColor:"rgb(35, 35, 35)"}},{selector:"edge[score = 1]",css:{width:1.8}},{selector:"edge[score > 0.9][score < 1]",css:{width:1.5}},{selector:"edge[score = 0.9]",css:{width:1.5}},{selector:"edge[score > 0.8][score < 0.9]",css:{width:1.35}},{selector:"edge[score = 0.9]",css:{width:1.35}},{selector:"edge[score > 0.7][score < 0.8]",css:{width:1.2}},{selector:"edge[score = 0.7]",css:{width:1.2}},{selector:"edge[score > 0.6][score < 0.7]",css:{width:1.1}},{selector:"edge[score = 0.6]",css:{width:1.1}},{selector:"edge[score > 0.5][score < 0.6]",css:{width:1}},{selector:"edge[score = 0.5]",css:{width:1}},{selector:"edge[score < 0.5]",css:{width:1}},{selector:"edge:selected",css:{"line-color":"rgb(164, 0, 181)"}}];var d=n(64180),g=n.n(d),u=n(9251),m=n(47375),x=n.n(m),h=n(42196),p=n(98349),y=n.n(p),_=n(92334),f=n.n(_);let b={combined_score:"Combined Score",neighborhood_on_chromosome:"Gene Neighborhood ",gene_fusion:"Gene Fusions",phylogenetic_cooccurrence:"Gene Co-occurrence",homology:"Homology",coexpression:"Co-expression",experimentally_determined_interaction:"Experimentally Determined",database_annotated:"Association in Curated Databases",automated_textmining:"Textmining"};var j=e=>{let{data:t,nodes:n}=e,a=[...new Set(t.map(e=>e.type))],i=t.reduce((e,t)=>{let{target:n,type:o,score:a}=t;return e[n]||(e[n]={target:n}),e[n][o]=a,e},{}),r=e=>{var t,o;let a=n.find(t=>t.data.id===e);return a?"[".concat(null==a?void 0:null===(o=a.data)||void 0===o?void 0:null===(t=o.identifier)||void 0===t?void 0:t.slice(5),"]"):void 0};return(0,o.jsx)("div",{className:"App",children:(0,o.jsxs)("table",{className:f().table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:f().th,children:"Interaction"}),a.map(e=>(0,o.jsx)("th",{className:f().th,children:b[e]},e))]})}),(0,o.jsx)("tbody",{children:Object.values(i).map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:f().td,children:(0,o.jsxs)("div",{className:f().target,children:[e.target,(0,o.jsx)("p",{children:r(e.target)})]})}),a.map(t=>(0,o.jsx)("td",{className:f().td,children:e[t]||"N/A"},t))]},e.target))})]})})},v=e=>{var t;let{id:n,data:i}=e,[r,s]=(0,a.useState)(null),[l,c]=(0,a.useState)([]);return(0,a.useEffect)(()=>{i.nodes.map(e=>{e.data.id===n&&s(e.data)}),c(i.edges.map(e=>e.data.source===n?{target:e.data.target,score:e.data.score,type:e.data.type}:e.data.target===n?{target:e.data.source,score:e.data.score,type:e.data.type}:void 0).filter(Boolean))},[n]),(0,o.jsxs)("div",{className:y().container,children:[(0,o.jsx)("h2",{children:"Selected protein"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"10px 0"},children:[(0,o.jsx)("h3",{children:null==r?void 0:r.label}),(0,o.jsx)("p",{style:{fontSize:"13px",fontStyle:"italic"},children:"[".concat(null==r?void 0:null===(t=r.identifier)||void 0===t?void 0:t.slice(5),"]")})]}),(0,o.jsx)("p",{style:{fontSize:"12px"},children:null==r?void 0:r.domain_summary_url}),(0,o.jsx)("h4",{style:{marginTop:"10px"},children:"Interactions"}),(0,o.jsx)(j,{data:l,nodes:i.nodes})]})};let C={combined_score:"Combined Score",neighborhood_on_chromosome:"Gene Neighborhood ",gene_fusion:"Gene Fusions",phylogenetic_cooccurrence:"Gene Co-occurrence",homology:"Homology",coexpression:"Co-expression",experimentally_determined_interaction:"Experimentally Determined",database_annotated:"Association in Curated Databases",automated_textmining:"Textmining"};var S=e=>{var t,n,i,r;let{id:s,data:l}=e,[c,d]=(0,a.useState)(),[g,u]=(0,a.useState)(),[m,x]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e={};l.edges.map(t=>{t.data.id===s&&(e=t.data)});let t={id:e.target},n={id:e.source};l.nodes.map(e=>{console.log(e),t.id===e.data.id&&(t=e.data),n.id===e.data.id&&(n=e.data)}),d(t),u(n),console.log(n);let o=l.edges.map(e=>{if(e.data.source===n.id&&e.data.target===t.id||e.data.source===t.id&&e.data.target===n.id)return e}).filter(Boolean);console.log(o),x(o)},[s]),(0,o.jsxs)("div",{className:y().container,children:[(0,o.jsx)("h2",{children:"Selected Interaction"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"10px 0 0 0"},children:[(0,o.jsx)("h3",{children:null==g?void 0:g.label}),(0,o.jsx)("p",{style:{fontSize:"13px",fontStyle:"italic"},children:"[".concat(null==g?void 0:null===(t=g.identifier)||void 0===t?void 0:t.slice(5),"]")})]}),(0,o.jsx)("p",{style:{fontSize:"12px"},children:null==g?void 0:g.domain_summary_url}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"10px 0 0 0"},children:[(0,o.jsx)("h3",{children:null==c?void 0:c.label}),(0,o.jsx)("p",{style:{fontSize:"13px",fontStyle:"italic"},children:"[".concat(null==c?void 0:null===(n=c.identifier)||void 0===n?void 0:n.slice(5),"]")})]}),(0,o.jsx)("p",{style:{fontSize:"12px"},children:null==c?void 0:c.domain_summary_url}),(0,o.jsx)("div",{style:{height:"10px"}}),null==m?void 0:m.map((e,t)=>{if(0!==t)return(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{style:{fontSize:"14px"},children:C[e.data.type]}),": ",(0,o.jsx)("strong",{style:{fontSize:"13px",fontWeight:"normal"},children:e.data.score})]},t)}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{style:{fontSize:"14px"},children:"Combined Score"}),":",(0,o.jsx)("strong",{style:{fontSize:"13px"},children:" ".concat(null===(r=m[0])||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.score)})]})]})},w=n(40986),k=n.n(w),N=n(16368),z=n.n(N),I=e=>{let{layoutName:t,setLayoutName:n}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{marginBottom:"5px"},children:"Layout"}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",value:"cola",checked:"cola"===t,onChange:()=>n("cola")}),"Cola"]}),(0,o.jsxs)("label",{style:{marginLeft:"15px"},children:[(0,o.jsx)("input",{type:"radio",value:"grid",checked:"grid"===t,onChange:()=>n("grid")}),"Grid"]}),(0,o.jsxs)("label",{style:{marginLeft:"15px"},children:[(0,o.jsx)("input",{type:"radio",value:"circle",checked:"circle"===t,onChange:()=>n("circle")}),"Circle"]}),(0,o.jsx)("div",{style:{height:"5px"}}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",value:"dagre",checked:"dagre"===t,onChange:()=>n("dagre")}),"Dagre"]}),(0,o.jsxs)("label",{style:{marginLeft:"15px"},children:[(0,o.jsx)("input",{type:"radio",value:"concentric",checked:"concentric"===t,onChange:()=>n("concentric")}),"concentric"]})]})},E=e=>{let{edgeLength:t,onEdgeLengthChange:n,nodeSpacing:a,onNodeSpacingChange:i}=e;return(0,o.jsxs)("div",{style:{display:"flex",marginBottom:"5px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontSize:"15px",marginBottom:"5px"},children:"Edge Length"}),(0,o.jsx)("input",{type:"range",id:"edgeLength",name:"edgeLength",min:"1",max:"500",onChange:n,value:t})]}),(0,o.jsxs)("div",{style:{marginLeft:"20px"},children:[(0,o.jsx)("p",{style:{fontSize:"15px",marginBottom:"5px"},children:"Node Spacing"}),(0,o.jsx)("input",{type:"range",id:"nodeSpacing",name:"nodeSpacing",min:"1",max:"100",onChange:i,value:a})]})]})},T=n(96619),L=n(91326),F=n(45174);function D(e){let{id:t,filterEdgeByScore:n,setFilterEdgeByScore:i,disabled:r}=e,[s,l]=a.useState([0,1]);return(0,o.jsx)(L.Z,{sx:{width:100},children:(0,o.jsx)(F.ZP,{disabled:r,size:"small",getAriaLabel:()=>"Temperature range",value:s,onChange:(e,n)=>{l(n),i(e=>({...e,[t]:{min:n[0],max:n[1]}}))},valueLabelDisplay:"auto",step:.001,min:0,max:1})})}let R=[{id:"combined_score",text:"Combined Score",color:"rgb(128,0,128)"},{id:"neighborhood_on_chromosome",text:"Gene Neighborhood",color:"rgb(200,0,200)"},{id:"gene_fusion",text:"Gene Fusions",color:"rgb(0,160,200)"},{id:"phylogenetic_cooccurrence",text:"Gene Co-occurrence",color:"rgb(170,200,0)"},{id:"homology",text:"Homology",color:"rgb(255,165,0)"},{id:"coexpression",text:"Co-expression",color:"rgb(0,128,0)"},{id:"experimentally_determined_interaction",text:"Experimentally Determined",color:"rgb(255,69,0)"},{id:"database_annotated",text:"Association in Curated Databases",color:"rgb(0,0,255)"},{id:"automated_textmining",text:"Textmining",color:"rgb(35, 35, 35)"}];var Z=e=>{let{selectedEdgeType:t,setSelectedEdgeType:n,filterEdgeByScore:a,setFilterEdgeByScore:i}=e,r=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,o.jsxs)("div",{style:{marginTop:"13px"},children:[(0,o.jsx)("p",{children:"Interaction Filtering"}),R.map((e,n)=>(0,o.jsx)("div",{style:{marginBottom:"5px"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(T.Z,{size:"small",type:"radio",value:e.id,checked:t.includes(e.id),onClick:()=>r(e.id)}),(0,o.jsx)("div",{style:{width:"20px",height:"3px",backgroundColor:t.includes(e.id)?e.color:"#999"}}),(0,o.jsx)("p",{style:{marginLeft:"5px",fontSize:"12px",color:t.includes(e.id)?"black":"#888"},children:e.text})]}),(0,o.jsx)(D,{id:e.id,filterEdgeByScore:a,setFilterEdgeByScore:i,disabled:!t.includes(e.id)})]})},n))]})},A=n(36820),G=n(65681);h.Z.use(x()),h.Z.use(k()),h.Z.use(z());var B=a.memo(e=>{let{edges:t,nodes:n}=e,[i,r]=(0,a.useState)(200),[s,l]=(0,a.useState)(10),[d,m]=(0,a.useState)(n),[x,h]=(0,a.useState)(t),[p,y]=(0,a.useState)(""),[_,f]=(0,a.useState)(),[b,j]=(0,a.useState)(["combined_score","neighborhood_on_chromosome","gene_fusion","phylogenetic_cooccurrence","homology","coexpression","experimentally_determined_interaction","database_annotated","automated_textmining"]),[C,w]=(0,a.useState)({combined_score:{min:0,max:1},neighborhood_on_chromosome:{min:0,max:1},gene_fusion:{min:0,max:1},phylogenetic_cooccurrence:{min:0,max:1},homology:{min:0,max:1},coexpression:{min:0,max:1},experimentally_determined_interaction:{min:0,max:1},database_annotated:{min:0,max:1},automated_textmining:{min:0,max:1}}),[k,N]=(0,a.useState)("cola"),[z,T]=(0,a.useState)("none"),[L,F]=(0,a.useState)(3),D=(0,a.useRef)(null),R={name:k,nodeSpacing:e=>s,edgeLength:i,maxSimulationTime:2e3,..."dagre"===k&&{nodeSep:3,edgeSep:3,rankSep:3}};(0,a.useEffect)(()=>{let e=t.filter(e=>b.includes(e.data.type));if(h(e=e.filter(e=>parseFloat(e.data.score)>=C[e.data.type].min&&parseFloat(e.data.score)<=C[e.data.type].max)),console.log(n),console.log(e),"none"===z){if(!D.current)return;D.current.nodes().forEach((e,t)=>{e.data("cluster",null),e.style("background-color","rgb(230,230,230)")})}},[b,C,z]);let B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(!D.current)return;let t=D.current,n=t.elements().degreeCentralityNormalized(),o=t.nodes().map(e=>[n.degree(e)]);console.log("Centrality values for nodes:",o);let a=(0,A.a)(o,e,{initialization:"kmeans++",maxIterations:1e3}),i=a.clusters;console.log("K-means clustering result:",a),console.log("Clusters assigned to nodes:",i),t.nodes().forEach((e,t)=>{e.data("cluster",i[t]),e.style("background-color",P(i[t]))})},P=e=>{let t=["#FF6347","#4682B4","#32CD32","#FFD700","#6A5ACD"];return t[e%t.length]};return(0,o.jsxs)("div",{className:g().mainContainer,children:[(0,o.jsx)("div",{className:g().leftContainer,children:(0,o.jsx)("div",{className:g().cytoscape__container,children:(0,o.jsx)(u.Z,{elements:u.Z.normalizeElements({nodes:d,edges:x}),style:{width:"100%",height:"500px"},stylesheet:[...c],maxZoom:2.5,minZoom:.5,autounselectify:!1,boxSelectionEnabled:!0,layout:R,cy:e=>{D.current=e,e.on("tap","node",function(e){y("node"),f(e.target.id())}),e.on("tap","edge",function(e){y("edge"),f(e.target.id())});let t=e.elements().degreeCentralityNormalized();e.nodes().forEach(e=>{let n=t.degree(e);e.style("fontSize",8),e.style("width",40*n>25?40*n:25),e.style("height",40*n>25?40*n:25)})}})})}),(0,o.jsxs)("div",{className:g().rightContainer,children:["cola"===k&&(0,o.jsx)(E,{edgeLength:i,onEdgeLengthChange:e=>{r(parseInt(e.target.value))},nodeSpacing:s,onNodeSpacingChange:e=>{l(parseInt(e.target.value))}}),(0,o.jsx)(I,{layoutName:k,setLayoutName:N}),(0,o.jsx)(Z,{selectedEdgeType:b,setSelectedEdgeType:j,filterEdgeByScore:C,setFilterEdgeByScore:w}),(0,o.jsx)("p",{children:"Clustering"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("input",{type:"radio",value:"kmeans",checked:"kmeans"===z,onClick:()=>{T(e=>"kmeans"===e?"none":(B(parseInt(L)),"kmeans"))}}),"k-means",(0,o.jsx)(G.Z,{size:"small",sx:{ml:"10px"},value:L,onChange:e=>F(e.target.value),label:"Number of clusters"})]})]}),"node"===p&&(0,o.jsx)(v,{id:_,data:{nodes:n,edges:t}}),"edge"===p&&(0,o.jsx)(S,{id:_,data:{nodes:n,edges:t}})]})}),P=()=>{let{edges:e,nodes:t}=(0,a.useContext)(r.I);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{children:"Biological Network Visualization"}),(0,o.jsx)(l,{}),(null==e?void 0:e.length)>0&&(null==t?void 0:t.length)>0&&(0,o.jsx)(B,{edges:e,nodes:t})]})}},48888:function(e,t,n){"use strict";n.d(t,{I:function(){return i},MyProvider:function(){return r}});var o=n(57437),a=n(2265);let i=(0,a.createContext)(),r=e=>{let{children:t}=e,[n,r]=(0,a.useState)([]),[s,l]=(0,a.useState)([]);return(0,o.jsx)(i.Provider,{value:{nodes:n,setNodes:r,edges:s,setEdges:l},children:t})}},220:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});let o=e=>{let t=e.trim().split("\n"),n=t[0].split("	");return t.slice(1).map(e=>{let t=e.split("	");return n.reduce((e,n,o)=>(e[n]=t[o],e),{})})}},92334:function(e){e.exports={table:"InteractionTable_table__YlRcp",th:"InteractionTable_th__VAlt3",td:"InteractionTable_td__LYjV9",target:"InteractionTable_target__xZpTR"}},64180:function(e){e.exports={mainContainer:"NetworkResult_mainContainer__6O3Kw",leftContainer:"NetworkResult_leftContainer__kTPI2",rightContainer:"NetworkResult_rightContainer__fdfiX",cytoscape__container:"NetworkResult_cytoscape__container__aHcvz",styleSetting:"NetworkResult_styleSetting__J_fl_"}},98349:function(e){e.exports={container:"nodeInfo_container__aJo1v"}}},function(e){e.O(0,[421,264,614,430,971,23,744],function(){return e(e.s=39743)}),_N_E=e.O()}]);