(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{11809:function(e,o,t){Promise.resolve().then(t.bind(t,31969))},31969:function(e,o,t){"use strict";t.r(o);var n=t(57437),a=t(2265);t(57818);var d=t(220),c=t(48888),i=t(16463);t(87138);var r=t(19462);o.default=()=>{let e=(0,i.useRouter)(),[o,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[u,_]=(0,a.useState)([]),{nodes:p,setNodes:g,edges:h,setEdges:m}=(0,a.useContext)(c.I),x=(e,o)=>{let t=e.target.files[0],n=new FileReader;n.onload=e=>{let t=e.target.result,n=(0,d.X)(t);"interactions"===o?l(n):_(n)},n.readAsText(t)},y=e=>{let o={};return e.forEach(e=>{let{source:t,target:n}=e.data;o[t]=(o[t]||0)+1,o[n]=(o[n]||0)+1}),o};return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Biological Network Visualization"}),(0,n.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[(0,n.jsx)("h3",{style:{marginRight:"20px"},children:"Input Interactions"}),(0,n.jsx)("input",{type:"file",onChange:e=>x(e,"interactions"),accept:".tsv"})]}),(0,n.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[(0,n.jsxs)("h3",{style:{marginRight:"20px"},children:["Protein Annotations",(0,n.jsx)("p",{style:{fontSize:"13px"},children:"(Not required)"})]}),(0,n.jsx)("input",{type:"file",onChange:e=>x(e,"annotations"),accept:".tsv"})]}),(0,n.jsx)("div",{style:{marginTop:"20px"},children:(0,n.jsx)("button",{onClick:()=>{let o=[...new Map(s.map(e=>({data:{id:e["#node1"],label:e["#node1"]}})).map(e=>[e.data.id,e])).values()].map(e=>{let o=u.find(o=>o["#node"]===e.data.id);return o?{data:{...e.data,...o}}:e}),t=new Set,n=s.flatMap(e=>{let o="".concat(e["#node1"],"_").concat(e.node2),n="".concat(e.node2,"_").concat(e["#node1"]);return t.has(o)||t.has(n)?[]:(t.add(o),t.add(n),[{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_combined"),source:e["#node1"],target:e.node2,score:e.combined_score,type:"combined_score"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_neighborhood"),source:e["#node1"],target:e.node2,score:e.neighborhood_on_chromosome,type:"neighborhood_on_chromosome"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_gene_fusion"),source:e["#node1"],target:e.node2,score:e.gene_fusion,type:"gene_fusion"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_phylogenetic_cooccurrence"),source:e["#node1"],target:e.node2,score:e.phylogenetic_cooccurrence,type:"phylogenetic_cooccurrence"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_homology"),source:e["#node1"],target:e.node2,score:e.homology,type:"homology"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_coexpression"),source:e["#node1"],target:e.node2,score:e.coexpression,type:"coexpression"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_experimentally_determined_interaction"),source:e["#node1"],target:e.node2,score:e.experimentally_determined_interaction,type:"experimentally_determined_interaction"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_database_annotated"),source:e["#node1"],target:e.node2,score:e.database_annotated,type:"database_annotated"}},{data:{id:"".concat(e["#node1"],"_").concat(e.node2,"_automated_textmining"),source:e["#node1"],target:e.node2,score:e.automated_textmining,type:"automated_textmining"}}].filter(e=>0!==e.data.score&&"0"!==e.data.score))});m(n);let a=y(n),d=o.map(e=>({...e,data:{...e.data,size:a[e.data.id]?a[e.data.id]/1.5+25:25}}));g(d),console.log(n),console.log(d),e.push("/result")},children:"Visualize"})}),(null==h?void 0:h.length)>0&&(null==p?void 0:p.length)>0&&(0,n.jsx)(r.Z,{edges:h,nodes:p})]})}}},function(e){e.O(0,[421,264,839,308,971,23,744],function(){return e(e.s=11809)}),_N_E=e.O()}]);